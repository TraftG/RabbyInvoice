import{_ as y,b as c,c as a,F as H,r as O,d as i,t as r,f as Q,j as d,l as x,m as B}from"./main-DmqmlGfb.js";const E="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAMAAADDpiTIAAACnVBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACmK9AxAAAA3nRSTlMABSJBYXqNoLO7y8zFrZiFclY2FhRNfKrY/PLHmWw4Blyf98OIQiyB/fOxYhLW+rdeCli8/vCXMw9v4wQbk/XcYxmR3WAJd/HXS+K0JK+AAfTSGLX7A1PuHOtGwHkl2qkIRO/BE0/4XeBr5ifkIx5Kwuimdp5Jauz2p1kdEQdojtQrrH6PPPk0OXjR3tAmohfnAhW2v19REEBmPS7GC1UozsiQ4TI6Db7tGmUvjEeHZJttySqDzVScH7rTZ3Q7mouwLTCCUmm56p3p2Uggbn3Eq8qWpEV7o1u9uAxwzzeta+ZWAAAL3UlEQVR42u2d+Z9VdRnHwdyGQSIWYQADQZaRVRhCViUxCImrgMiiMAKhGEmLC4oTKmFqgo1iQBDYBmjZoi1im1ZmmdFett2/pRmzhRcz55x77/M9z/nez/v9O+d73u/nYe6dmXvv9OgBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEICeZ73j7HPOPe/8hoZejb0bGi7o886+7+rX3/uuIA8GDLxw0OCmclcMGTrsoncP975BCEf/ERcPLqcwctQlo1mCemTM2MZxadN/m+ZLx0/wvl0w5ayxEzMO/20mTZ5ymfdNgxHDp05rqWz8bzH9PTO87xwMuHzmrCqm/28ap8z2vn2ojTlz51U9/k6uuLKntwJUz/z3jqxp/J1ctYCvApFy9fsW1jz+Tha939sEqmHqYpPxd3LNEm8ZqJQ5HzAbfwcjl/LDoagozbzWcv4dXMf3hBGxbLnx+DtYsfR6by3IyMob7OffwahV3mKQhdmXVPNzvyysXuPtBun0Xxto/B003Vjy1oMUbloXbv4drG/1FoREbt4QdP7l8sZN3oqQwAc3B55/ubyIp4LF5ZYVwedfLt96k7cmdMOWUE//T+e2D3mLQpeMz/qSr1rZ+mFvVeiCBXnNv+NR4HZvWTiDbXk8/v+HibxotGjMaM5x/uXyR1q9heE0bv9orvMvlz/GzwSLRGuvnOdfLn/c2xn+jztyn3953J3e0vBf7qp6jPNuqPq54938SLAojNle6fBarrtn6b0zdtzX+UDeNmHJ6E/sXF75k4i1vEKkGFx9f2WDGzx35YAzr1J6YMuD0yu70C5vc3iLT1b0hXvY7u6v1DZw0EMVXGvFp7zVoYOHm7KPbNTAtC/bmx6p4LHgUd425E/roqzjalm+O9MF7/o0DwIRsSvrsB7LNP5OZs/M+paih/Z468uzI+MbADbMrOQ5+/y9GX+zfL63vzyDsg1q8uMVXnfNZ7JdmPcN+tIv0//UFUvbK77yE09mWoDBvHfYlX1ZhrS4XzWXbr8x0wsMnvJOIM2aLCO6f0eVV/9slk8XuLXNO4IyvTNMaO3+qi9/IMuLzA96RxDmcxnms7y1hgMO3Z1+wDp+JeDGNenjOfz5mk7oNyT9iCPeGWQ5mv4twNOX13jGzelvNfmCdwdZvpg6my/V/gnQU9O/BHzZO4Qol6V+DMCkrxgck75mw7xLiDI+dTIXWRzT83DaMc3HvFNocjxtMINszll1Iu2gKd4pJHkm7XUAJ6z+BMSVaQsw2buFJH3TxjLe6qTSxpSTVlT6qyYwIO2heaPdWzf2pH0v+Kx3DEGeSHkEaPmq4WE7UxbgUu8agjyVMpMHLQ97fF7yYdv56xK5c0+OXwB69Phayro9551Dj9uSJ3KB7WlpXwK+7p1Djj0p/yUPGJ93cfJxvb17yPGN5IFcYf3u7ZTfPE+q7ZeOUDHfTB7IOeYHprz9IPNrzsGGxsRxjJtjfuAjyQvwLe8gYgxP/tHM8/YnvpC8AHd4FxHjUPI4vh3gyOS/QPMd7yJifDf/R+TvJZ7YzGcG5UryI/LCEO/aPZK8c/O9k2iR/N9xX4gjX8z/iw50y8nEYcwNcWQp+S3DI7yTaPFS4jC+H+TM5N8//8A7iRarE4fxwyBn/ijxzB97J5FidvL7NsM8IUt+4rnXu4kU+5OfkIV5v+aziWe+7N1EimcSZ3FtmENXJh7a4N1EiiWJs1gc5tADiYce9m4ixSuJs3gpzKE/STz0Me8mUiT/KuDROjoUuoQFEIcFEIcFEIcFEIcFEIcFEIcFEIcFEIcFEIcFEIcFEIcFqAOO7b7lYLX8NHEWs6q+rs+hPzuk93HD+1/9eSV/oK3eee0X26TeWDL84C+9kxeOXqO9p5IfR1/3rl1Izmv1HkxO/KrCv9Aqw9Bl3qPJhd08+HfHxFo/3D4G3njNO3OBebL+vx0oDfWOXGh+7T2f4BzxTlxsVtf7g8D167wTF5wQn21SJLL8nS9pttb5D4TSPnIV6vwPEC2qvVCdc8p7REFpS/srH7Dee0ZBebH2QPXOb7xnFJQXag9U79T36wrGeOctPoHe2lwQWIBUWABxWABxWABxWABxWABxWABxWABxWABxWABxWABxWABxWABxlBfgxLCs/NboOhVhdWjydZQXILt71J8PYBUhRlgAwwgxwgIYRogRFsAwQoywAIYRYoQFMIwQIyyAYYQYYQEMI8QIC2AYIUZYAMMIMcICGEaIERbAMEKMsACGEWKEBTCMECMsgGGEGGEBDCPECAtgGCFGWADDCDHCAhhGiBEWwDBCjLAAhhFihAUwjBAjLIBhhBhhAQwjxAgLYBghRlgAwwgxwgIYRogRFsAwQoywAIYRYoQFMIwQIyyAYYQYYQEMI8QIC2AYIUZYAMMIMcICGEaIERbAMEKMsACGEWLEyv1o4nV+F+bmrQ5lAWp3X5Z4nZNhbt7qUBagdvdSc9J1fh/m5q0OZQEM3E8mXWdEoLs3OpQFMHDfknCZSfcFunujQ1kAA/cd47q/zLRQd290KAtg4f6H7i/zx2C3b3MoC2Dh/sbm7q5yPNzt2xzKApi4j+3mIvNeCXj/JoeyACbu7S93eY2WqSHv3+RQFsDG/Vivrq7xp7ACFoeyAEburX8+4wqbF4Q2MDiUBbByL/WdfvoFnu4XXqH2Q1kAO/dNO4f875+//pf2XCRqPZQFsHRv2zascXXT9llvXhjy2b/poSyApjsRxN2JIO5OBHF3Ioi7E0HcnQji7kQQdyeCuDsRxN2JIO5OBHF3Ioi7E0HcnQji7kQQdyeCuDsRxN2JIO5OBHF3Ioi7E0HcnQji7kQQdyeCuDsRxN2JIO5OBHF3Ioi7E0HcnQji7kQQdyeCuDsRxN2JIO5OBHF3Ioi7E0HcnQji7kQQdyeCuDsRxN2JIO5OBHF3Ioi7E0HcnQji7kQQdyeCuDsRxN2JIO5OBHF3Ioi7E0HcnQji7kQQdyeCuDsRxN2JIO5OBHF3Ioi7E0HcnQji7kQQdyeCuDsRxN2JIO5OBHF3Ioi7E0HcnQji7kQQdyeCuDsRxN2JIO5OBHF3Ioi7E0HcnQji7kQQdyeCuDsRxN2JIO5OBHF3Ioi7E0HcnQji7kQQdyeCuDsRxN2JIO5OBHF3Ioi7E0HcnQji7kQQdyeCuDsRxN2JIO5OBHF3Ioi7E0HcnQji7kQQdyeCuDsRxN2JIO5OBHF3Ioi7E0HcnQji7kQQdyeCuDsRxN2JIO5OBHF3Ioi7E0HcnQji7kQQdyeCuDsRxN2JIO5OBHF3Ioi7E0HcnQji7kQQdyeCuDsRxN2JIO5OBHF3Ioi7E0HcnQji7kQQdyeCuDsRxN2JIO5OBHF3Ioi7E0HcnQji7kQQdyeCuDsRxN2JIO5OBHF3Ioi7E0HcnQji7kQQdyeCuDsRxN2JIO5OBHF3Ioi7E0HcnQji7kQQdyeCuDsRxN2JIO5OBHF3Ioi7E0HcnQji7kQQdyeCuDsRxN2JIO5OBHF3Ioi7E0HcnQji7kQQdyeCuDsRxN2JIO5OBHF3Ioi7E0HcnQji7kQQdyeCuDsRxN2JIO5OBHF3Ioi7E0HcnQji7kQQdyeCuDsRxN2JIO5OBHF3Ioi7E0HcnQji7kQQdyeCuDsRxN2JkOoOZRZAHhZAHBZAHBZAHBZAHBZAHBZAHBZAHBZAHBZAHBZAHBZAHBZAHBZAnPpegD3eeYtPo/eMgtLfO2/xmeY9o7As9O5bePp4jygsf/XuW3imeI8oLK969y06TQO8RxSWOeO8Cxec494TCs1e78IF5znvAYVm1XbvxIVmn/d8wrPLu3GRmXfIezzhKa33rlxcWu71nk4e/O15786F5ZT3bPKhda936GKy+WzvyeRF6e8bvGMXkH/803suOTLh3CHevQvGuhHt3kPJl7Y7+/Ra3eSdvRBs3/rmKYFn/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABa/AvtokzvbU2zKQAAAABJRU5ErkJggg==",m={data(){return{products:[{title:"Starter Pack",description:"10k Rabby 1k Caro",image:E,price:100,currency:"Stars"}],canDoubleTap:!1,paymentInProgress:!1}},methods:{async fetchInvoiceAndCheckPayment(e){if(!this.paymentInProgress){this.paymentInProgress=!0;try{const t=await(await fetch(e)).json(),s=t.invoiceLink;s?(window.open(s,"_blank"),this.checkPaymentStatus(t.paymentId)):console.error("Invoice not found")}catch(A){console.error("Error while fetching invoice:",A)}finally{this.paymentInProgress=!1}}},async checkPaymentStatus(e){try{if(!e){console.error("Payment ID is not available");return}const A=`http://localhost:8080/payment-status/${e}`,s=await(await fetch(A)).json();console.log("Payment Status:",s),this.handleInvoiceStatus(s.status,s.productTitle)}catch(A){console.error("Error while checking payment status:",A),this.handleInvoiceStatus("failed")}},async handleInvoiceStatus(e,A=""){const t=d();e==="paid"?(A==="Starter Pack"?(t.add(1e4),t.addCarrot(1e3)):A==="2xTap"&&(this.canDoubleTap=!0),await x(t.score),await B(t.carrotScore),console.log("Payment successful"),this.showCustomPopup("Спасибо за покупку!")):this.handleFailedPayment(A)},handleFailedPayment(e){const A=d();e==="Starter Pack"?(A.add(1e4),A.addCarrot(1e3)):e==="2xTap"&&(this.canDoubleTap=!0),A.add(1e4),A.addCarrot(1e3),console.log("Payment failed but rewards given"),this.showCustomPopup("Что-то пошло не так, но бонусы начислены")},showCustomPopup(e){alert(e)},buyProductStarterPack(){this.fetchInvoiceAndCheckPayment("http://localhost:8080/pack-invoice")},buyProductGenerateInvoice(){this.fetchInvoiceAndCheckPayment("http://localhost:8080/2xtap-invoice")}}},C={class:"product-container"},h=["src","alt"],v=["disabled"],p={key:2};function k(e,A,t,s,I,n){return c(),a("div",C,[(c(!0),a(H,null,O(I.products,(o,l)=>(c(),a("div",{key:l,class:"product-card"},[i("img",{src:o.image,alt:o.title,class:"product-image"},null,8,h),i("h3",null,r(o.title),1),i("p",null,r(o.description),1),i("p",null,r(o.price)+" "+r(o.currency),1),o.title==="2xTap"?(c(),a("button",{key:0,onClick:A[0]||(A[0]=(...u)=>n.buyProductGenerateInvoice&&n.buyProductGenerateInvoice(...u)),disabled:I.canDoubleTap,class:"clickable-button"}," 50 Stars ",8,v)):Q("",!0),o.title==="Starter Pack"?(c(),a("button",{key:1,onClick:A[1]||(A[1]=(...u)=>n.buyProductStarterPack&&n.buyProductStarterPack(...u)),class:"clickable-button"}," 100 Stars ")):Q("",!0),I.canDoubleTap?(c(),a("p",p,"Теперь вы можете тапать дважды!")):Q("",!0)]))),128))])}const D=y(m,[["render",k],["__scopeId","data-v-cbe46c3b"]]);export{D as default};
